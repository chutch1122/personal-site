<article
  class="h-full flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition-shadow hover:shadow-md"
  data-testid="project-card"
>
  <div class="h-40 w-full bg-gray-100">
    <img
      [src]="project.image"
      [alt]="project.imageAlt"
      class="h-full w-full object-cover"
    />
  </div>

  <div class="flex flex-1 flex-col gap-3 p-4">
    <h3 class="text-base font-semibold text-gray-900 truncate">{{ project.title }}</h3>
    <p class="text-sm text-gray-700">{{ project.description }}</p>

    <div class="mt-auto flex flex-wrap gap-2">
      @for (tech of project.technologies; track tech) {
        <span
          class="rounded-full border border-gray-200 bg-gray-50 px-2.5 py-1 text-xs font-medium text-gray-700">{{ tech }}</span>
      }
    </div>
  </div>

  <footer class="border-t border-gray-200 bg-gray-50">
    @if (project.liveUrl || project.repositories?.length) {
      <div class="flex flex-wrap divide-x divide-gray-200">
        @if (project.liveUrl) {
          <a
            class="flex w-full flex-1 items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
            [href]="project.liveUrl"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Open live demo for {{ project.title }}"
            title="Open live demo"
          >
            <svg class="h-4 w-4" aria-hidden="true" viewBox="0 0 24 24" fill="none">
              <path
                d="M13.5 6H18v4.5M18 6L10.5 13.5M15 13.5V18a1.5 1.5 0 0 1-1.5 1.5H6A1.5 1.5 0 0 1 4.5 18V9A1.5 1.5 0 0 1 6 7.5h4.5"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Live demo</span>
          </a>
        }
        @if (project.repositories?.length) {
          @for (repo of project.repositories; track repo.url) {
            <a
              class="flex w-full flex-1 items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-1"
              [href]="repo.url"
              target="_blank"
              rel="noopener noreferrer"
              [attr.aria-label]="(repo.label || repo.provider || 'Source') + ' for ' + project.title"
              [attr.title]="repo.label || ('View on ' + (repo.provider || 'Source'))"
            >
              <svg class="h-4 w-4" viewBox="0 0 16 16" aria-hidden="true" fill="currentColor">
                <path
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49 0 0-2.23.48-2.69-1.07 0 0-.36-.91-.88-1.15 0 0-.72-.49.05-.48 0 0 .78.06 1.19.8 0 0 .69 1.18 1.84.85 0 0 .07-.55.28-.93-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.58.82-2.14-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.14 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
              </svg>
              <span>{{ repo.label || repo.provider || 'Source' }}</span>
            </a>
          }
        }
      </div>
    } @else {
      <div
        class="w-full px-4 py-3 text-sm font-medium text-gray-600 text-center"
        role="status"
        aria-label="Project not public"
      >
        Not public at this time
      </div>
    }
  </footer>
</article>
